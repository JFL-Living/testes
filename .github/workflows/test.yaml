name: Deploy to K8S PRD Cluster

on: 
  push:
    branches: main

  workflow_dispatch:

env:
  APP_NAME: send-mailbox-api
  AWS_REGION: us-east-2
  NAMESPACE: jfl-novo-app

jobs:
  publish:
    name: Publish
    runs-on: ubuntu-latest
    
    steps:
    - name: Print Secrets
      id: secret
      env:
        TEXT: "image publish"
      run: |
        echo "::set-output name=image::$TEXT"
  
  deploy:
    name: Deploy
    runs-on: ubuntu-latest
    needs:
    - publish
    steps:
    - name: Print Env Publish
      run: |
        echo "${{ publish.steps.secret.image }}"
